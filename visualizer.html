<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProStroy - –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/auth.css">
    <link rel="stylesheet" href="./css/visualizer.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Three.js –¥–ª—è 3D –≥—Ä–∞—Ñ–∏–∫–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- –î–æ–±–∞–≤–∏—Ç—å –≤ visualizer.html -->
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div class="wrapper">
        <header class="container">
            <img class="logo" src="./img/logo.png" alt="ProStroy">
            <nav>
                <ul>
                    <li class="btn"><a href="index.html">–≥–ª–∞–≤–Ω–∞—è</a></li>
                    <li class="btn"><a href="#" id="auth-link">–≤–æ–π—Ç–∏</a></li>
                    <li class="btn"><a href="materials.html">–º–∞—Ç–µ—Ä–∏–∞–ª—ã</a></li>
                    <li class="active"><a href="visualizer.html">–≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</a></li>
                    <li class="btn"><button id="themeToggle" class="theme-toggle">üåì</button></li>
                </ul>
            </nav>
        </header>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div id="public-content">
            <div class="material">
                <p>–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –º–æ–¥—É–ª—å–Ω—ã—Ö –¥–æ–º–æ–≤</p>
            </div>

            <div class="login-prompt container">
                <h3>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
                <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</p>
                <button class="btn" onclick="auth.showAuth()" style="margin-top: 20px;">
                    <a style="text-decoration: none; color: #228a8a;">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</a>
                </button>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div id="protected-content" class="protected-content">
            <div class="material">
                <p>–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –º–æ–¥—É–ª—å–Ω—ã—Ö –¥–æ–º–æ–≤</p>
            </div>

            <div class="visualization-container container">
                <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–µ–≤–∞ -->
                <div class="control-panel">
                    <h2>–ú–æ–¥—É–ª–∏</h2>
                    <div class="modules-grid" id="modulesGrid">
                        <!-- –ú–æ–¥—É–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                   
                    <h2>–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</h2>
                    <div class="mode-controls">
                        <button id="mode2D" class="mode-btn active">2D –≤–∏–¥</button>
                        <button id="mode3D" class="mode-btn">3D –≤–∏–¥</button>
                    </div>
                   
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                    <button id="deleteSelected" class="remove-btn">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π</button>
                    <button id="clearAll" class="remove-btn" style="background: #6b7280;">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                   
                    <div class="visualizer-info">
                        <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
                        <ul>
                            <li>‚Ä¢ –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –º–æ–¥—É–ª—å —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</li>
                            <li>‚Ä¢ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –º–æ–¥—É–ª–∏ –º—ã—à—å—é</li>
                            <li>‚Ä¢ –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –º–æ–¥—É–ª—å –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è</li>
                            <li>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 3D —Ä–µ–∂–∏–º –¥–ª—è –æ–±—ä–µ–º–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</li>
                        </ul>
                    </div>
                </div>
               
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ -->
                <div class="visualization-area">
                    <h2>–û–±–ª–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                   
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è 2D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ -->
                    <div class="visualization-container-area" id="visualizationContainer">
                        <!-- 2D –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                    </div>
                   
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
                    <div class="visualization-container-area" id="visualization3DContainer" style="display: none;">
                        <!-- 3D —Å—Ü–µ–Ω–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                   
                    <div class="visualization-hint">
                        <span id="modeHint">üìê –†–µ–∂–∏–º 2D: –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –º–æ–¥—É–ª–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è</span>
                    </div>
                </div>
               
                <!-- –ü–∞–Ω–µ–ª—å –∫–æ—Ä–∑–∏–Ω—ã —Å–ø—Ä–∞–≤–∞ -->
                <div class="cart-panel">
                    <h2>–ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–∫–∞–∑–æ–≤</h2>
                    <div class="cart-items" id="cartItems">
                        <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                    </div>
                    <div class="cart-total" id="cartTotal">
                        –ò—Ç–æ–≥–æ: ‚ÇΩ0
                    </div>
                    <div class="cart-actions">
                        <button class="checkout-btn" onclick="visualizer.checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                    </div>
                   
                    <div class="project-info">
                        <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ:</h3>
                        <div class="project-stats">
                            <div>–ú–æ–¥—É–ª–µ–π: <span id="moduleCount">0</span></div>
                            <div>–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å: <span id="totalArea">0</span> –º¬≤</div>
                            <div>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="projectCost">0</span> ‚ÇΩ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ –º–æ–¥—É–ª—è -->
            <div class="property-panel" id="propertyPanel" style="display: none;">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="authModal" class="auth-modal">
            <div class="auth-container">
                <div id="login-form" class="auth-form">
                    <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                    <div class="form-group">
                        <label for="login-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" id="login-username" required>
                        <div class="error-message" id="login-username-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="login-password" required>
                        <div class="error-message" id="login-password-error"></div>
                    </div>
                    <button type="submit" class="auth-btn" onclick="auth.handleLogin()">–í–æ–π—Ç–∏</button>
                    <div class="auth-switch">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="auth.showRegisterForm()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                    </div>
                    <button type="button" class="auth-btn auth-btn--secondary" onclick="auth.hideAuth()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>

                <div id="register-form" class="auth-form">
                    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <div class="form-group">
                        <label for="register-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input type="text" id="register-username" required>
                        <div class="error-message" id="register-username-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="register-password" required>
                        <div class="error-message" id="register-password-error"></div>
                    </div>
                    <div class="form-group">
                        <label for="register-password-confirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="register-password-confirm" required>
                        <div class="error-message" id="register-password-confirm-error"></div>
                    </div>
                    <button type="submit" class="auth-btn" onclick="auth.handleRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <div class="auth-switch">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="auth.showLoginForm()">–í–æ–π—Ç–∏</a>
                    </div>
                    <button type="button" class="auth-btn auth-btn--secondary" onclick="auth.hideAuth()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <footer class="footer">
            <div class="footer-content container">
                <div class="footer-section about">
                    <h3>ProStroy</h3>
                    <p>–õ—É—á—à–∞—è –∫–æ–º–ø–∞–Ω–∏—è –ø–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤—É –º–æ–¥—É–ª—å–Ω—ã—Ö —Å–æ–æ—Ä—É–∂–µ–Ω–∏–π. –ú—ã —Å–æ–∑–¥–∞–µ–º –±—É–¥—É—â–µ–µ –≤–º–µ—Å—Ç–µ —Å –≤–∞–º–∏.</p>
                    <div class="social-links">
                        <a href="#" class="social-link">VK</a>
                        <a href="#" class="social-link">MAX</a>
                        <a href="#" class="social-link">–ì–æ—Å–£—Å–ª—É–≥–∏</a>
                    </div>
                </div>
               
                <div class="footer-section navigation">
                    <h4>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="materials.html">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a></li>
                        <li><a href="visualizer.html">–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</a></li>
                        <li><a href="#" onclick="auth.showAuth()">–í–æ–π—Ç–∏</a></li>
                    </ul>
                </div>
               
                <div class="footer-section contacts">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <ul>
                        <li>üìû +7 (999) 123-45-67</li>
                        <li>‚úâÔ∏è info@prostroy.ru</li>
                        <li>üìç –ß–µ–±–æ–∫—Å–∞—Ä—ã, –ß–µ—Ä–Ω—ã—à–µ–≤—Å–∫–æ–≥–æ 24</li>
                        <li>üïí –ü–Ω-–ü—Ç: 12:00-12:01</li>
                    </ul>
                </div>
               
                <div class="footer-section services">
                    <h4>–£—Å–ª—É–≥–∏</h4>
                    <ul>
                        <li>–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                        <li>–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ</li>
                        <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</li>
                        <li>–î–æ—Å—Ç–∞–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</li>
                    </ul>
                </div>
            </div>
           
            <div class="footer-bottom container">
                <p>&copy; 2024 ProStroy. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <div class="footer-links">
                    <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                    <a href="#">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript —Ñ–∞–π–ª—ã -->
    <script src="./js/auth.js"></script>
    <script src="./js/cart.js"></script>
    <script src="./js/theme.js"></script>
    <script src="./js/visualizer.js"></script>
   
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–ó–∞–≥—Ä—É–∑–∫–∞ ProStroy Visualizer...');
           
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—ã
            themeManager.init();
            auth.init();
            cart.init();
           
            // –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
            // visualizer —É–∂–µ —Å–æ–∑–¥–∞–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ visualizer.js
           
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            const currentUser = auth.getCurrentUser();
            if (currentUser) {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', currentUser);
                console.log('–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ');
            } else {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');
            }
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º
        window.refreshVisualizer = function() {
            if (window.visualizer && auth.getCurrentUser()) {
                console.log('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–∞...');
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            }
        };

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
        document.addEventListener('themeChanged', function() {
            if (window.visualizer) {
                console.log('–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞, –æ–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä...');
                // –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ–¥ —Ç–µ–º—É
            }
        });
    </script>
</body>
</html>